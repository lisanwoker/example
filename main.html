<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Info</title>

    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  

    <link href="https://fonts.googleapis.com/css2?family=UnifrakturMaguntia&display=swap" rel="stylesheet">

    <!-- 기본 시스템 설정에 따른 CSS 파일 -->
    <link rel="stylesheet" id="theme-link" href="styles1.css">
    <link rel="stylesheet" href="chatbot.css"> <!-- AI 비서 챗봇 스타일 -->

    <script>
        // 시스템 다크 모드 감지 및 설정 함수
        function setSystemTheme() {
            const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const themeLink = document.getElementById('theme-link');

            if (prefersDarkScheme) {
                themeLink.href = 'styles1.css'; // 다크 모드일 때
            } else {
                themeLink.href = 'styles1.css'; // 기본 라이트 모드일 때
            }
        }

        // DOMContentLoaded 이벤트가 발생할 때 시스템 테마 설정 적용
        document.addEventListener('DOMContentLoaded', setSystemTheme);
    </script>
</head>
<body>
    <!-- 메인 콘텐츠 -->
    <header>
        <h1>Juyeop HighSchool</h1>
    </header>

    <div id="ticker">
        <div id="ticker-wrapper">
            <p>
                Juyeop High School information. ©copyright. Meal and timetable information is sourced from NEIS and complies with its regulations. 
                주엽고등학교 정보. 급식 및 시간표 정보는 NEIS에서 제공하며, 관련 규정을 준수합니다.
                Juyeop High School information. ©copyright. Meal and timetable information is sourced from NEIS and complies with its regulations. 
                주엽고등학교 정보. 급식 및 시간표 정보는 NEIS에서 제공하며, 관련 규정을 준수합니다.
            </p>
        </div>
    </div> 
    
    <!-- 드롭다운 버튼 -->
    <div class="dropdown-container">
        <div class="dropdown">
            <button class="dropdown-button" onclick="toggleDropdown()">메뉴(menu) </button>
            <div class="dropdown-content" id="dropdown-content">
                <a href="countdown.html">디지털시계</a>
                <a href="update.html">업데이트 내역</a>
                <a href="gajwa.html">다른 학교로 변경</a>
                <a href="alram.html">급식 알람</a>
                <a href="weeklunch.html">이번주 급식</a>
            </div>
        </div>
    </div>
    
    <main>  
        <!-- D-day 카운터 한 줄로 출력 -->
        <div class="Announcement-container">
            <h3>공지사항 : D-day는 아래로 내려갔습니다</h3>
        </div>

        <!-- 급식 정보 -->
        <div id="meal-info">

            <p onclick="window.location.href='weeklunch.html'" style="cursor: pointer;">-이번주 급식 보기-</p>   
            
        </div>

        <div class="countdown-container">
            <div class="countdown" id="midterm-exam">중간고사: 계산 중...</div>
            <p>  ↳ 중간고사 2024년 10월 7일 </p>
            <div class="countdown" id="winter-vacation">겨울방학: 계산 중...</div>
            <p>   ↳ 겨울방학 2025년 1월 7일 </p>
        
        </div>


        <!-- 학년, 반 선택 및 시간표 정보 -->
        <div class="time-info">
            <div id="time">
                <h2>시간표 조회 (개발중)</h2>
                <label for="grade-select">학년:</label>
                <select id="grade-select">
                    <option value="">학년 선택</option>
                    <option value="1">1학년</option>
                    <option value="2">2학년</option>
                    <option value="3">3학년</option>
                </select>
                <label for="class-select">반:</label>
                <select id="class-select">
                    <option value="">반 선택</option>
                    <option value="1">1반</option>
                    <option value="2">2반</option>
                    <option value="3">3반</option>
                    <option value="4">4반</option>
                    <option value="5">5반</option>
                    <option value="6">6반</option>
                    <option value="7">7반</option>
                    <option value="8">8반</option>
                    <option value="9">9반</option>
                    <option value="10">10반</option>
                    <option value="11">11반</option>
                    <option value="12">12반</option>
                </select>
                <button onclick="timeInfo()">시간표 조회</button>
                <div id="time-info"></div>
            </div>
        </div>

    </main>

    <!-- AI 비서 버튼 -->
    <button id="openChatbot" onclick="toggleChatbot()">Chatbot Bata</button>

    <!-- 챗봇 팝업 -->
    <div id="chatPopup" style="display:none;">
        <div id="chatContainer">
            <div id="chatHeader">
                <span>chatbot비서 Bata</span>
                <button id="closeChatbot" onclick="toggleChatbot()">닫기</button>
            </div>
            <div id="conversation">
                <p>예시 질문:</p>
                <ul>
                    <li>오늘 날씨 어때?</li>
                    <li>내일 급식 뭐야?</li>
                    <li>지금 몇 시야?</li>
                </ul>
            </div>
            <input type="text" id="userInput" placeholder="질문을 입력하세요" />
            <button onclick="sendMessage()">전송</button>
        </div>
    </div>

    <footer>
        <p>© seongbeen Lee / Meal Info by Neis</p>
    </footer>

    <!-- JavaScript -->
    <script src="d-day.js"></script>
    <script src="d-day2.js"></script>
    <script src="app.js"></script>
    <script src="time.js"></script>
    <script src="chatbot.js"></script>

    <script>
        // 드롭다운 메뉴 토글 함수
        function toggleDropdown() {
            const dropdown = document.getElementById("dropdown-content");
            dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
        }

        // 챗봇 팝업 토글 함수
        function toggleChatbot() {
            const chatPopup = document.getElementById("chatPopup");
            chatPopup.style.display = chatPopup.style.display === "none" ? "block" : "none";
        }

        // 챗봇 메시지 전송 처리 함수
        function sendMessage() {
            const userInput = document.getElementById('userInput').value.trim();
            const response = chatbotResponse(userInput);

            const conversation = document.getElementById('conversation');
            conversation.innerHTML += `<p><strong>사용자:</strong> ${userInput}</p>`;
            conversation.innerHTML += `<p><strong>챗봇:</strong> ${response}</p>`;

            document.getElementById('userInput').value = ''; // 입력창 초기화
        }
    </script>
</body>
</html>
